import{S as x,N as w,R as _,m as d,p as g,q as f,s,F as m,H as u,y as l,V as i,M as n,X as S,x as c,P,O as V,t as b,Q as v}from"./index-DcvvkuKg.js";import{A as C}from"./AppLayout-B9CHbY-4.js";import{F as A}from"./FileInputComponent-IqK7NO6m.js";import M from"./SuspendedUserAlert-CjbfXtzm.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{Link:x,AppLayout:C,FileInputComponent:A,SuspendedUserAlert:M},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:w({id:"",name:"",email:"",mobile_no:"",role:"",branch:"",password:"",password_confirmation:"",profile_image:""}),password:w({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){var e;let a=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:"",this.form.branch=(e=this.backendUser.branch)==null?void 0:e.id),$(".card-body").on("change","#role",function(t){a.form.role=$(t.target).val()}),$(".card-body").on("change","#branch",function(t){a.form.branch=$(t.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(a=>({...a,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},L={class:"row"},B={class:"col-md-12"},E={class:"card mb-4"},N=s("div",{class:"card-header pb-0"},[s("h5",null,"Backend Users"),s("p",null,"Manage Backend Users.")],-1),R=s("hr",null,null,-1),O={class:"card-body"},j={class:"row"},D={class:"mb-3 col-md-6"},q=s("label",{for:"name",class:"form-label"},"Full Name",-1),T={class:"text-danger"},W={class:"mb-3 col-md-6"},H=s("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"text-danger"},X={class:"mb-3 col-md-6"},Y=s("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1),z={class:"text-danger"},G={class:"mb-3 col-md-6"},J=s("label",{for:"role",class:"form-label"},"Role",-1),K=s("option",{selected:"",value:""},"-- Select --",-1),Z=["value"],ss={class:"text-danger"},os=s("div",{class:"h5 my-4"},"Authentication",-1),es={key:0,class:"mb-3 col-md-6"},rs=s("label",{for:"password",class:"form-label"},"Password",-1),ts={class:"text-danger"},ns={key:1,class:"mb-3 col-md-6"},as=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),ds={class:"text-danger"},ls={class:"mb-3 col-md-6"},is=s("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1),cs=s("br",null,null,-1),ms={class:"text-danger"},ps={class:"mt-2"},_s=["disabled"],fs=v("Cancel"),us={key:0,class:"card"},bs=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1),hs={class:"card-body"},ws={class:"row"},gs={key:0,class:"mb-3 col-md-6"},vs=s("label",{for:"password",class:"form-label"},"Password",-1),Us={class:"text-danger"},ks={key:1,class:"mb-3 col-md-6"},ys=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),xs={class:"text-danger"},Ss={class:"mt-2"},Ps=["disabled"],Vs=v("Cancel"),Cs={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},As={class:"modal-dialog modal-sm",role:"document"},Ms={class:"modal-content"},Is=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1),Fs={class:"modal-body py-0 px-3"},Ls={class:"row"},Bs={class:"col mb-1"},Es={class:"text-danger"},Ns=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1);function Rs(a,e,t,Os,o,p){const U=_("SuspendedUserAlert"),k=_("FileInputComponent"),h=_("Link"),y=_("AppLayout");return d(),g(y,null,{default:f(()=>[s("div",L,[s("div",B,[s("div",E,[N,R,s("div",O,[t.backendUser&&t.backendUser.deleted_at?(d(),g(U,{key:0,userId:t.backendUser.id},null,8,["userId"])):m("",!0),s("form",{id:"formAccountSettings",onSubmit:e[7]||(e[7]=u((...r)=>p.submit&&p.submit(...r),["prevent"]))},[s("div",j,[s("div",D,[q,l(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.name=r)},null,512),[[i,o.form.name]]),s("div",T,n(o.form.errors.name),1)]),s("div",W,[H,l(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.email=r)},null,512),[[i,o.form.email]]),s("div",Q,n(o.form.errors.email),1)]),s("div",X,[Y,l(s("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.mobile_no=r)},null,512),[[i,o.form.mobile_no]]),s("div",z,n(o.form.errors.mobile_no),1)]),s("div",G,[J,l(s("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.role=r)},[K,(d(!0),c(V,null,P(t.allRoles,r=>(d(),c("option",{key:r.id,value:r.id},n(r.name),9,Z))),128))],512),[[S,o.form.role]]),s("div",ss,n(o.form.errors.role),1)]),os,t.backendUser?m("",!0):(d(),c("div",es,[rs,l(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[4]||(e[4]=r=>o.form.password=r)},null,512),[[i,o.form.password]]),s("div",ts,n(o.form.errors.password),1)])),t.backendUser?m("",!0):(d(),c("div",ns,[as,l(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[5]||(e[5]=r=>o.form.password_confirmation=r)},null,512),[[i,o.form.password_confirmation]]),s("div",ds,n(o.form.errors.password),1)])),s("div",ls,[is,cs,b(k,{isRequired:!1,id:"profile_image",prvImage:p.profileImage,modelValue:o.form.profile_image,"onUpdate:modelValue":e[6]||(e[6]=r=>o.form.profile_image=r)},null,8,["prvImage","modelValue"]),s("div",ms,n(o.form.errors.profile_image),1)])]),s("div",ps,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},n(t.backendUser?"Update":"Save"),9,_s),b(h,{class:"btn btn-outline-danger",href:a.route("settings.users")},{default:f(()=>[fs]),_:1},8,["href"])])],32)])]),t.backendUser&&t.backendUser.deleted_at==null?(d(),c("div",us,[bs,s("div",hs,[s("form",{id:"formAccountSettings",onSubmit:e[10]||(e[10]=u((...r)=>a.updatePasssword&&a.updatePasssword(...r),["prevent"]))},[s("div",ws,[t.backendUser?(d(),c("div",gs,[vs,l(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[8]||(e[8]=r=>o.password.password=r)},null,512),[[i,o.password.password]]),s("div",Us,n(o.password.errors.password),1)])):m("",!0),t.backendUser?(d(),c("div",ks,[ys,l(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[9]||(e[9]=r=>o.password.password_confirmation=r)},null,512),[[i,o.password.password_confirmation]]),s("div",xs,n(o.password.errors.password),1)])):m("",!0)]),s("div",Ss,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:o.form.processing||!(o.password.password.length>0&&o.password.password_confirmation.length>0)}," Update ",8,Ps),b(h,{class:"btn btn-outline-danger",href:a.route("settings.users")},{default:f(()=>[Vs]),_:1},8,["href"])])],32)])])):m("",!0)]),s("div",Cs,[s("div",As,[s("div",Ms,[Is,s("form",{id:"formAccountDelete",onSubmit:e[12]||(e[12]=u((...r)=>p.changePassword&&p.changePassword(...r),["prevent"]))},[s("div",Fs,[s("div",Ls,[s("div",Bs,[l(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":e[11]||(e[11]=r=>o.password.confirm_password=r)},null,512),[[i,o.password.confirm_password]]),s("div",Es,n(o.password.errors.confirm_password),1)])])]),Ns],32)])])])])]),_:1})}const Hs=I(F,[["render",Rs]]);export{Hs as default};
