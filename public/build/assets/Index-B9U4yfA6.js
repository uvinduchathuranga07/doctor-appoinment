import{S as u,N as p,R as l,m as d,p as r,q as c,s as e,F as b,t as _,H as f,Q as k}from"./index-DcvvkuKg.js";import{A as g}from"./AppLayout-C8ilSJRN.js";import{D as y}from"./DataTable-B6S0KIo7.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={components:{Link:u,AppLayout:g,DataTable:y},data(){return{columns:[{data:"check",name:"check",orderable:!1},{data:"id",name:"id",orderable:!0},{data:"name",name:"name",orderable:!0},{data:"action",name:"action",orderable:!1,searchable:!1}],columnDefs:[{className:"text-center",targets:[0,1]}],order:[[1,"desc"]],isDisabled:!0,selectedRows:[],form:p({_method:"post",id:"",status:""})}},updated(){this.flash.error&&this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},mounted(){$("#mytable tbody").on("click","tr .action_delete",s=>{const t=$(s.target).data("item-id");this.selectedRows=[],this.getSelectedItems(t)}),$("#mytable tbody").on("click","tr .action_edit",s=>{const t=$(s.target).data("item-id");this.$inertia.visit(route("settings.roles.edit",t))}),$("#mytable tbody").on("click","tr .action_permissions",s=>{const t=$(s.target).data("item-id");this.$inertia.visit(route("settings.roles.permissions",t))}),$("#mytable tbody").on("click",".item-check input[type=checkbox]",s=>{const t=$(s.target).val();$(s.target).prop("checked")&&!this.selectedRows.includes(t)?this.getSelectedItems(t):this.removeUnselectedItem(t)})},methods:{reloadTable(){this.$refs.datatable.reloadDatatable()},selectAll(s){var t=this;$(s.target).is(":checked")?($(".item-check input[type=checkbox]").prop("checked",!0),$(".item-check input[type=checkbox]:checked").each(function(){t.selectedRows.includes(this.value)||t.getSelectedItems(this.value)}),this.$data.isDisabled=!1):($(".item-check input[type=checkbox]").prop("checked",!1),$(".item-check input[type=checkbox]").each(function(){t.selectedRows.includes(this.value)&&t.removeUnselectedItem(this.value)}),this.$data.isDisabled=!0)},getSelectedItems(s){this.selectedRows.push(s),this.selectedRows.length>0&&(this.$data.isDisabled=!1)},removeUnselectedItem(s){this.selectedRows=this.selectedRows.filter(function(t){return t!=s}),this.selectedRows.length<=0&&($("#selectAll").prop("checked",!1),this.$data.isDisabled=!0)},deleteSelectedItems(){this.form.transform(s=>({...s,ids:[...this.selectedRows]})).post(route("settings.roles.delete"),{onSuccess:()=>{this.resetForm(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{$("#deleteConfirm").modal("hide"),this.resetForm()}})},resetForm(){this.form.reset("id","status")}}},x={class:"row"},R={class:"col-md-12"},S={class:"card mb-4"},A={class:"card-header pb-0"},D=e("h5",null,"Roles & Permissions",-1),I=e("p",null,"Manage User Roles & Permissions.",-1),C={class:"d-flex"},F=e("i",{class:"bx bx-plus"},null,-1),L=k(" Create "),N={class:"card-body"},M={width:"10%"},V={class:"custom-control custom-checkbox"},U=e("label",{class:"form-check-label",for:"selectAll"},null,-1),B=e("th",{width:"10%"},"ID",-1),E=e("th",null,"Role Name",-1),P=e("th",{width:"5%"},"Action",-1),T={class:"modal modal-top fade",id:"deleteConfirm",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},Y={class:"modal-dialog modal-sm",role:"document"},q={class:"modal-content"},H=e("div",{class:"modal-header px-3 pb-2"},[e("h5",{class:"modal-title",id:"exampleModalLabel2"},"Are You Sure?")],-1),Q=e("div",{class:"modal-body py-0 px-3"},[e("div",{class:"row"},[e("div",{class:"col mb-1"},[e("p",null,"Are you sure you want to delete?")])])],-1),W={class:"modal-footer px-3 pb-3"},j=e("button",{type:"submit",class:"btn btn-sm btn-primary"}," Yes ",-1);function z(s,t,G,J,i,o){const n=l("Link"),m=l("data-table"),h=l("AppLayout");return d(),r(h,null,{default:c(()=>[e("div",x,[e("div",R,[e("div",S,[e("div",A,[D,I,e("div",C,[s.$root.hasPermission("roles-permissions.create")?(d(),r(n,{key:0,class:"btn btn-main btn-sm",href:s.route("settings.roles.create")},{default:c(()=>[F,L]),_:1},8,["href"])):b("",!0)])]),e("div",N,[_(m,{ref:"datatable",id:"mytable",url:s.route("settings.roles.getdata"),columns:i.columns,columnDefs:i.columnDefs},{header:c(()=>[e("tr",null,[e("th",M,[e("div",V,[e("input",{type:"checkbox",class:"form-check-input",id:"selectAll",onClick:t[0]||(t[0]=a=>o.selectAll(a))}),U])]),B,E,P])]),_:1},8,["url","columns","columnDefs"])])])]),e("div",T,[e("div",Y,[e("div",q,[H,e("form",{id:"formAccountDelete",onSubmit:t[2]||(t[2]=f((...a)=>o.deleteSelectedItems&&o.deleteSelectedItems(...a),["prevent"]))},[Q,e("div",W,[e("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...a)=>o.resetForm&&o.resetForm(...a))}," Close "),j])],32)])])])])]),_:1})}const ee=v(w,[["render",z]]);export{ee as default};
