import{A as V}from"./AppLayout-C8ilSJRN.js";import{S,N as w,R as y,m as d,p as C,q as v,s as t,M as i,H as P,y as p,V as m,X as _,x as c,P as h,O as b,F as U,t as A,Q as g}from"./index-DcvvkuKg.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={components:{AppLayout:V,Link:S},props:{appointment:Object,patients:Array,prescription:Object,products:Array},data(){var r,s,n,u,o,l;return{form:w({id:((r=this.prescription)==null?void 0:r.id)||"",appointment_id:this.appointment.id,patient_id:((s=this.prescription)==null?void 0:s.patient_id)||"",details:(u=(n=this.prescription)==null?void 0:n.details)!=null&&u.length?this.prescription.details:[{product_id:"",quantity:1},{product_id:"",quantity:1}],status:((o=this.prescription)==null?void 0:o.status)||"pending",pharmacy_name:((l=this.prescription)==null?void 0:l.pharmacy_name)||""})}},methods:{addRow(){this.form.details.push({product_id:"",quantity:1})},removeRow(r){this.form.details.splice(r,1)},submit(){const r=this.prescription?"prescription.update":"prescription.store";this.form.post(route(r),{onSuccess:()=>{this.$root.showMessage("success","Success","Prescription saved successfully.")},onError:()=>{this.$root.showMessage("error","Error","Failed to save prescription.")}})}}},q={class:"card p-4"},M={class:"mb-3"},R=t("label",null,"Patient",-1),B=t("option",{value:"",disabled:""},"Select Patient",-1),E=["value"],F={class:"text-danger"},O={class:"mb-3"},j=t("label",null,"Prescription Items",-1),D={class:"table table-bordered"},I=t("thead",null,[t("tr",null,[t("th",null,"Product"),t("th",null,"Quantity"),t("th",{width:"50"},"Action")])],-1),Q=["onUpdate:modelValue"],T=t("option",{disabled:"",value:""},"Select Product",-1),H=["value"],X=["onUpdate:modelValue"],z={class:"text-center"},G=["onClick"],J=t("i",{class:"bx bx-trash"},null,-1),K=[J],W={class:"text-danger"},Y=t("i",{class:"bx bx-plus"},null,-1),Z=g(" Add Item "),$=[Y,Z],tt={class:"mb-3"},et=t("label",null,"Status",-1),ot=t("option",{disabled:"",value:""},"Select Status",-1),st=t("option",{value:"pending"},"Pending",-1),nt=t("option",{value:"completed"},"Completed",-1),it=t("option",{value:"cancelled"},"Cancelled",-1),rt=[ot,st,nt,it],lt={class:"text-danger"},at={class:"mb-3"},dt=t("label",null,"Pharmacy Name",-1),ct={class:"text-danger"},pt=["disabled"],ut=g("Cancel");function mt(r,s,n,u,o,l){const x=y("Link"),k=y("AppLayout");return d(),C(k,null,{default:v(()=>[t("div",q,[t("h4",null,i(n.prescription?"Edit":"Add")+" Prescription - "+i(n.appointment.doctor.name),1),t("form",{onSubmit:s[5]||(s[5]=P((...e)=>l.submit&&l.submit(...e),["prevent"]))},[p(t("input",{type:"hidden","onUpdate:modelValue":s[0]||(s[0]=e=>o.form.appointment_id=e)},null,512),[[m,o.form.appointment_id]]),t("div",M,[R,p(t("select",{class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>o.form.patient_id=e)},[B,(d(!0),c(b,null,h(n.patients,e=>(d(),c("option",{key:e.id,value:e.id},i(e.name),9,E))),128))],512),[[_,o.form.patient_id]]),t("div",F,i(o.form.errors.patient_id),1)]),t("div",O,[j,t("table",D,[I,t("tbody",null,[(d(!0),c(b,null,h(o.form.details,(e,f)=>(d(),c("tr",{key:f},[t("td",null,[p(t("select",{class:"form-control","onUpdate:modelValue":a=>e.product_id=a},[T,(d(!0),c(b,null,h(n.products,a=>(d(),c("option",{key:a.id,value:a.id},i(a.name),9,H))),128))],8,Q),[[_,e.product_id]])]),t("td",null,[p(t("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":a=>e.quantity=a},null,8,X),[[m,e.quantity]])]),t("td",z,[o.form.details.length>2?(d(),c("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:a=>l.removeRow(f)},K,8,G)):U("",!0)])]))),128))])]),t("div",W,i(o.form.errors.details),1),t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:s[2]||(s[2]=(...e)=>l.addRow&&l.addRow(...e))},$)]),t("div",tt,[et,p(t("select",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=e=>o.form.status=e)},rt,512),[[_,o.form.status]]),t("div",lt,i(o.form.errors.status),1)]),t("div",at,[dt,p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=e=>o.form.pharmacy_name=e),placeholder:"Optional"},null,512),[[m,o.form.pharmacy_name]]),t("div",ct,i(o.form.errors.pharmacy_name),1)]),t("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},i(n.prescription?"Update":"Save"),9,pt),A(x,{href:r.route("prescription.index",n.appointment.id),class:"btn btn-outline-danger"},{default:v(()=>[ut]),_:1},8,["href"])],32)])]),_:1})}const ft=L(N,[["render",mt]]);export{ft as default};
