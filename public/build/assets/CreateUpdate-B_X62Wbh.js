import{S as v,N as _,R as u,m as l,p as g,q as w,s,x as m,H as f,F as c,y as d,V as a,M as t,t as y,Q as U}from"./index-DcvvkuKg.js";import{A as x}from"./AppLayout-BXyTYlgl.js";import{F as S}from"./FileInputComponent-IqK7NO6m.js";import P from"./SuspendedUserAlert-DeoatsEz.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={components:{Link:v,AppLayout:x,FileInputComponent:S,SuspendedUserAlert:P},props:{errors:Object,allRoles:Object,frontendUser:Object},data(){return{form:_({id:"",name:"",dob:"",email:"",phone:"",password:"",password_confirmation:"",avatar:""}),password:_({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){this.frontendUser&&(this.form.id=this.frontendUser.id,this.form.name=this.frontendUser.name,this.form.dob=this.frontendUser.dob,this.form.email=this.frontendUser.email,this.form.phone=this.frontendUser.phone)},computed:{profileImage(){return this.frontendUser?this.frontendUser.avatar??"":""}},methods:{submit(){this.form.post(this.frontendUser?route("customer.update"):route("customer.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(i=>({...i,id:this.form.id})).put(route("customer.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})},viewHistory(i){this.$inertia.get(route("customer.view",{id:i}))}}},C={class:"row"},A={class:"col-md-12"},M={class:"card mb-4"},E={class:"card-header pb-0"},L=s("h5",null,"Users",-1),N=s("p",null,"Manage Users.",-1),F=s("hr",null,null,-1),B={class:"card-body"},D={class:"row"},H={class:"mb-3 col-md-6"},R=s("label",{for:"name",class:"form-label"},"Full Name",-1),j={class:"text-danger"},O={class:"mb-3 col-md-6"},I=s("label",{for:"email",class:"form-label"},"Email",-1),T={class:"text-danger"},W={class:"mb-3 col-md-6"},q=s("label",{for:"phone",class:"form-label"},"Mobile No",-1),Q={class:"text-danger"},Y={class:"mb-3 col-md-6"},z=s("label",{for:"dob",class:"form-label"},"Date of birth",-1),G={class:"text-danger"},J=s("div",{class:"mb-3 col-md-6"},null,-1),K={key:0,class:"mb-3 col-md-6"},X=s("label",{for:"password",class:"form-label"},"Password",-1),Z={class:"text-danger"},ss={key:1,class:"mb-3 col-md-6"},os=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),es={class:"text-danger"},rs={class:"mt-2"},ts=["disabled"],ns=U("Cancel"),ds={key:0,class:"card"},as=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1),is={class:"card-body"},ls={class:"row"},ms={key:0,class:"mb-3 col-md-6"},cs=s("label",{for:"password",class:"form-label"},"Password",-1),ps={class:"text-danger"},fs={key:1,class:"mb-3 col-md-6"},_s=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),us={class:"text-danger"},ws={class:"mt-2"},hs=["disabled"],bs={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},vs={class:"modal-dialog modal-sm",role:"document"},gs={class:"modal-content"},ys=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1),Us={class:"modal-body py-0 px-3"},xs={class:"row"},Ss={class:"col mb-1"},Ps={class:"text-danger"},Vs=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1);function ks(i,e,n,Cs,o,p){const h=u("Link"),b=u("AppLayout");return l(),g(b,null,{default:w(()=>[s("div",C,[s("div",A,[s("div",M,[s("div",E,[L,N,n.frontendUser?(l(),m("button",{key:0,class:"btn btn-main",onClick:e[0]||(e[0]=f(r=>p.viewHistory(n.frontendUser.id),["prevent"]))},"View Customer History")):c("",!0)]),F,s("div",B,[s("form",{id:"formAccountSettings",onSubmit:e[7]||(e[7]=f((...r)=>p.submit&&p.submit(...r),["prevent"]))},[s("div",D,[s("div",H,[R,d(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.name=r)},null,512),[[a,o.form.name]]),s("div",j,t(o.form.errors.name),1)]),s("div",O,[I,d(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.email=r)},null,512),[[a,o.form.email]]),s("div",T,t(o.form.errors.email),1)]),s("div",W,[q,d(s("input",{class:"form-control",type:"phone",id:"phone",name:"phone","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.phone=r)},null,512),[[a,o.form.phone]]),s("div",Q,t(o.form.errors.phone),1)]),s("div",Y,[z,d(s("input",{class:"form-control",type:"date",id:"dob",name:"dob","onUpdate:modelValue":e[4]||(e[4]=r=>o.form.dob=r)},null,512),[[a,o.form.dob]]),s("div",G,t(o.form.errors.dob),1)]),J,n.frontendUser?c("",!0):(l(),m("div",K,[X,d(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[5]||(e[5]=r=>o.form.password=r)},null,512),[[a,o.form.password]]),s("div",Z,t(o.form.errors.password),1)])),n.frontendUser?c("",!0):(l(),m("div",ss,[os,d(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[6]||(e[6]=r=>o.form.password_confirmation=r)},null,512),[[a,o.form.password_confirmation]]),s("div",es,t(o.form.errors.password),1)]))]),s("div",rs,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},t(n.frontendUser?"Update":"Save"),9,ts),y(h,{class:"btn btn-outline-danger",href:i.route("customer.index")},{default:w(()=>[ns]),_:1},8,["href"])])],32)])]),n.frontendUser&&n.frontendUser.deleted_at==null?(l(),m("div",ds,[as,s("div",is,[s("form",{id:"formAccountSettings",onSubmit:e[10]||(e[10]=f((...r)=>i.updatePasssword&&i.updatePasssword(...r),["prevent"]))},[s("div",ls,[n.frontendUser?(l(),m("div",ms,[cs,d(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[8]||(e[8]=r=>o.password.password=r)},null,512),[[a,o.password.password]]),s("div",ps,t(o.password.errors.password),1)])):c("",!0),n.frontendUser?(l(),m("div",fs,[_s,d(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[9]||(e[9]=r=>o.password.password_confirmation=r)},null,512),[[a,o.password.password_confirmation]]),s("div",us,t(o.password.errors.password),1)])):c("",!0)]),s("div",ws,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:o.form.processing||!(o.password.password.length>0&&o.password.password_confirmation.length>0)}," Update ",8,hs)])],32)])])):c("",!0)]),s("div",bs,[s("div",vs,[s("div",gs,[ys,s("form",{id:"formAccountDelete",onSubmit:e[12]||(e[12]=f((...r)=>p.changePassword&&p.changePassword(...r),["prevent"]))},[s("div",Us,[s("div",xs,[s("div",Ss,[d(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":e[11]||(e[11]=r=>o.password.confirm_password=r)},null,512),[[a,o.password.confirm_password]]),s("div",Ps,t(o.password.errors.confirm_password),1)])])]),Vs],32)])])])])]),_:1})}const Fs=V(k,[["render",ks]]);export{Fs as default};
