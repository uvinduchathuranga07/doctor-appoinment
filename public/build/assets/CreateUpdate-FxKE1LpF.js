import{V as P,N as w,R as _,m as d,p as g,q as f,s,F as m,H as u,y as n,U as i,M as a,S as v,x as c,P as S,O as V,t as b,Q as y}from"./index-Bx5EY2Cc.js";import{A as C}from"./AppLayout-kVKv0N3c.js";import{F as A}from"./FileInputComponent-DsD3omPs.js";import M from"./SuspendedUserAlert-BTtmQiEO.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                            */const F={components:{Link:P,AppLayout:C,FileInputComponent:A,SuspendedUserAlert:M},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:w({id:"",name:"",email:"",mobile_no:"",role:"",branch:"",password:"",password_confirmation:"",Pharmacy:"",profile_image:""}),password:w({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){var e;let l=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:"",this.form.Pharmacy=this.backendUser.pharmacy_name,this.form.branch=(e=this.backendUser.branch)==null?void 0:e.id),$(".card-body").on("change","#role",function(t){l.form.role=$(t.target).val()}),$(".card-body").on("change","#branch",function(t){l.form.branch=$(t.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(l=>({...l,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},L={class:"row"},B={class:"col-md-12"},E={class:"card mb-4"},N=s("div",{class:"card-header pb-0"},[s("h5",null,"Backend Users"),s("p",null,"Manage Backend Users.")],-1),R=s("hr",null,null,-1),D={class:"card-body"},O={class:"row"},j={class:"mb-3 col-md-6"},q=s("label",{for:"name",class:"form-label"},"Full Name",-1),T={class:"text-danger"},W={class:"mb-3 col-md-6"},H=s("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"text-danger"},Y={class:"mb-3 col-md-6"},z=s("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1),G={class:"text-danger"},J={class:"mb-3 col-md-6"},K=s("label",{for:"role",class:"form-label"},"Role",-1),X=s("option",{selected:"",value:""},"-- Select --",-1),Z=["value"],ss={class:"text-danger"},os={class:"mb-3 col-md-6"},es=s("label",{for:"role",class:"form-label"},"Select Pharmacy",-1),rs=s("option",{selected:"",value:""},"-- Select --",-1),ts=[rs],as={class:"text-danger"},ns=s("div",{class:"h5 my-4"},"Authentication",-1),ls={key:0,class:"mb-3 col-md-6"},ds=s("label",{for:"password",class:"form-label"},"Password",-1),is={class:"text-danger"},cs={key:1,class:"mb-3 col-md-6"},ms=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),ps={class:"text-danger"},_s={class:"mb-3 col-md-6"},fs=s("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1),us=s("br",null,null,-1),bs={class:"text-danger"},hs={class:"mt-2"},ws=["disabled"],gs=y("Cancel"),vs={key:0,class:"card"},ys=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1),Us={class:"card-body"},ks={class:"row"},xs={key:0,class:"mb-3 col-md-6"},Ps=s("label",{for:"password",class:"form-label"},"Password",-1),Ss={class:"text-danger"},Vs={key:1,class:"mb-3 col-md-6"},Cs=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),As={class:"text-danger"},Ms={class:"mt-2"},Is=["disabled"],Fs=y("Cancel"),Ls={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},Bs={class:"modal-dialog modal-sm",role:"document"},Es={class:"modal-content"},Ns=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1),Rs={class:"modal-body py-0 px-3"},Ds={class:"row"},Os={class:"col mb-1"},js={class:"text-danger"},qs=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1);function Ts(l,e,t,Ws,o,p){const U=_("SuspendedUserAlert"),k=_("FileInputComponent"),h=_("Link"),x=_("AppLayout");return d(),g(x,null,{default:f(()=>[s("div",L,[s("div",B,[s("div",E,[N,R,s("div",D,[t.backendUser&&t.backendUser.deleted_at?(d(),g(U,{key:0,userId:t.backendUser.id},null,8,["userId"])):m("",!0),s("form",{id:"formAccountSettings",onSubmit:e[8]||(e[8]=u((...r)=>p.submit&&p.submit(...r),["prevent"]))},[s("div",O,[s("div",j,[q,n(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.name=r)},null,512),[[i,o.form.name]]),s("div",T,a(o.form.errors.name),1)]),s("div",W,[H,n(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.email=r)},null,512),[[i,o.form.email]]),s("div",Q,a(o.form.errors.email),1)]),s("div",Y,[z,n(s("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.mobile_no=r)},null,512),[[i,o.form.mobile_no]]),s("div",G,a(o.form.errors.mobile_no),1)]),s("div",J,[K,n(s("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.role=r)},[X,(d(!0),c(V,null,S(t.allRoles,r=>(d(),c("option",{key:r.id,value:r.id},a(r.name),9,Z))),128))],512),[[v,o.form.role]]),s("div",ss,a(o.form.errors.role),1)]),s("div",os,[es,n(s("select",{class:"select2 form-control form-select",id:"Pharmacy","aria-label":"Default select example","onUpdate:modelValue":e[4]||(e[4]=r=>o.form.Pharmacy=r)},ts,512),[[v,o.form.Pharmacy]]),s("div",as,a(o.form.errors.Pharmacy),1)]),ns,t.backendUser?m("",!0):(d(),c("div",ls,[ds,n(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[5]||(e[5]=r=>o.form.password=r)},null,512),[[i,o.form.password]]),s("div",is,a(o.form.errors.password),1)])),t.backendUser?m("",!0):(d(),c("div",cs,[ms,n(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[6]||(e[6]=r=>o.form.password_confirmation=r)},null,512),[[i,o.form.password_confirmation]]),s("div",ps,a(o.form.errors.password),1)])),s("div",_s,[fs,us,b(k,{isRequired:!1,id:"profile_image",prvImage:p.profileImage,modelValue:o.form.profile_image,"onUpdate:modelValue":e[7]||(e[7]=r=>o.form.profile_image=r)},null,8,["prvImage","modelValue"]),s("div",bs,a(o.form.errors.profile_image),1)])]),s("div",hs,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},a(t.backendUser?"Update":"Save"),9,ws),b(h,{class:"btn btn-outline-danger",href:l.route("settings.users")},{default:f(()=>[gs]),_:1},8,["href"])])],32)])]),t.backendUser&&t.backendUser.deleted_at==null?(d(),c("div",vs,[ys,s("div",Us,[s("form",{id:"formAccountSettings",onSubmit:e[11]||(e[11]=u((...r)=>l.updatePasssword&&l.updatePasssword(...r),["prevent"]))},[s("div",ks,[t.backendUser?(d(),c("div",xs,[Ps,n(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[9]||(e[9]=r=>o.password.password=r)},null,512),[[i,o.password.password]]),s("div",Ss,a(o.password.errors.password),1)])):m("",!0),t.backendUser?(d(),c("div",Vs,[Cs,n(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[10]||(e[10]=r=>o.password.password_confirmation=r)},null,512),[[i,o.password.password_confirmation]]),s("div",As,a(o.password.errors.password),1)])):m("",!0)]),s("div",Ms,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:o.form.processing||!(o.password.password.length>0&&o.password.password_confirmation.length>0)}," Update ",8,Is),b(h,{class:"btn btn-outline-danger",href:l.route("settings.users")},{default:f(()=>[Fs]),_:1},8,["href"])])],32)])])):m("",!0)]),s("div",Ls,[s("div",Bs,[s("div",Es,[Ns,s("form",{id:"formAccountDelete",onSubmit:e[13]||(e[13]=u((...r)=>p.changePassword&&p.changePassword(...r),["prevent"]))},[s("div",Rs,[s("div",Ds,[s("div",Os,[n(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":e[12]||(e[12]=r=>o.password.confirm_password=r)},null,512),[[i,o.password.confirm_password]]),s("div",js,a(o.password.errors.confirm_password),1)])])]),qs],32)])])])])]),_:1})}const Ks=I(F,[["render",Ts]]);export{Ks as default};
