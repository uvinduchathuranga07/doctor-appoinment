import{V as p,N as b,R as a,m as r,p as n,q as d,s as e,F as _,t as f,H as k,Q as y}from"./index-Bx5EY2Cc.js";import{A as v}from"./AppLayout-kVKv0N3c.js";import{D as g}from"./DataTable-5UW3XpaE.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                            */const x={components:{Link:p,AppLayout:v,DataTable:g},data(){return{columns:[{data:"check",name:"check",orderable:!1,searchable:!1},{data:"name",name:"name",orderable:!0,searchable:!0},{data:"image",name:"image",orderable:!1,searchable:!1},{data:"stock_count",name:"stock_count",orderable:!0},{data:"action",name:"action",orderable:!1}],columnDefs:[{className:"text-center",targets:[]}],order:[[1,"desc"]],form:b({ids:""}),selectedRows:[],isDisabled:!0}},mounted(){const s=this;$("#mytable tbody").on("click","tr .action_edit",t=>{const o=$(t.target).data("item-id");s.$inertia.visit(route("product.edit",o))}),$("#mytable tbody").on("click","tr .action_delete",t=>{const o=$(t.target).data("item-id");s.selectedRows=[],s.getSelectedItems(o)}),$("#mytable tbody").on("click",".item-check input[type=checkbox]",t=>{const o=$(t.target).val();$(t.target).prop("checked")&&!s.selectedRows.includes(o)?s.getSelectedItems(o):s.removeUnselectedItem(o)})},methods:{reloadTable(){this.$refs.datatable.reloadDatatable()},getSelectedItems(s){this.selectedRows.push(s),this.isDisabled=!1},selectAll(s){const t=this;$(s.target).is(":checked")?($(".item-check input[type=checkbox]").prop("checked",!0),$(".item-check input[type=checkbox]:checked").each(function(){t.selectedRows.includes(this.value)||t.getSelectedItems(this.value)})):($(".item-check input[type=checkbox]").prop("checked",!1),$(".item-check input[type=checkbox]").each(function(){t.selectedRows.includes(this.value)&&t.removeUnselectedItem(this.value)}),t.isDisabled=!0)},removeUnselectedItem(s){this.selectedRows=this.selectedRows.filter(t=>t!==s),this.selectedRows.length<=0&&($("#selectAll").prop("checked",!1),this.isDisabled=!0)},deleteSelectedItems(){this.form.ids=this.selectedRows,this.form.post(route("product.delete"),{onSuccess:()=>{$("#deleteConfirm").modal("hide"),this.resetForm(),this.reloadTable(),this.$root.showMessage("success","Deleted successfully.")},onError:()=>{this.$root.showMessage("error","Error deleting products.")}})},resetForm(){this.form.ids=[],this.selectedRows=[],$("#selectAll").prop("checked",!1)}}},A={class:"row"},I={class:"col-md-12"},D={class:"card mb-4"},R={class:"card-header pb-0"},S=e("h5",null,"Products",-1),C=e("p",null,"Manage Products and Usage Information.",-1),N={class:"d-flex"},F=e("i",{class:"bx bx-plus"},null,-1),L=y(" Create "),V={class:"card-body"},M={width:"10%"},T={class:"custom-control custom-checkbox"},U=e("label",{class:"form-check-label",for:"selectAll"},null,-1),B=e("th",null,"Name",-1),P=e("th",null,"Image",-1),E=e("th",null,"Stock",-1),Y=e("th",null,"Action",-1),q={class:"modal modal-top fade",id:"deleteConfirm",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},H={class:"modal-dialog modal-sm",role:"document"},Q={class:"modal-content"},j=e("div",{class:"modal-header px-3 pb-2"},[e("h5",{class:"modal-title"},"Are You Sure?")],-1),z=e("div",{class:"modal-body py-0 px-3"},[e("div",{class:"row"},[e("div",{class:"col mb-1"},[e("p",null,"Are you sure you want to delete?")])])],-1),G={class:"modal-footer px-3 pb-3"},J=e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Yes",-1);function K(s,t,o,O,i,c){const m=a("Link"),h=a("data-table"),u=a("AppLayout");return r(),n(u,null,{default:d(()=>[e("div",A,[e("div",I,[e("div",D,[e("div",R,[S,C,e("div",N,[s.$root.hasPermission("product.create")?(r(),n(m,{key:0,class:"btn btn-main btn-sm",href:s.route("product.create")},{default:d(()=>[F,L]),_:1},8,["href"])):_("",!0)])]),e("div",V,[f(h,{ref:"datatable",url:s.route("product.getdata"),columns:i.columns,columnDefs:i.columnDefs,id:"mytable"},{header:d(()=>[e("tr",null,[e("th",M,[e("div",T,[e("input",{type:"checkbox",class:"form-check-input",id:"selectAll",onClick:t[0]||(t[0]=l=>c.selectAll(l))}),U])]),B,P,E,Y])]),_:1},8,["url","columns","columnDefs"])])])]),e("div",q,[e("div",H,[e("div",Q,[j,e("form",{onSubmit:t[2]||(t[2]=k((...l)=>c.deleteSelectedItems&&c.deleteSelectedItems(...l),["prevent"]))},[z,e("div",G,[e("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...l)=>c.resetForm&&c.resetForm(...l))},"Close"),J])],32)])])])])]),_:1})}const se=w(x,[["render",K]]);export{se as default};
